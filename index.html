<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=640, initial-scale=1, user-scalable=no" />
<title>Canlı Kurlar</title>
<style>
body{
  margin:0;background:#0f1115;color:#fff;font-family:Segoe UI,Roboto,Arial,sans-serif;
  width:640px;height:1152px;overflow:hidden;position:relative;
}
header{
  text-align:center;
  padding:25px 10px 5px;
  font-size:28px;
  font-weight:600;
  color:#3aa0ff;
}
#time{
  text-align:center;
  font-size:13px;
  color:#999;
  margin-bottom:10px;
}
footer{
  position:absolute;
  bottom:0;left:0;width:100%;
  display:flex;justify-content:space-between;align-items:center;
  padding:10px 15px;
  background:rgba(0,0,0,0.8);
  backdrop-filter:blur(8px);
  border-top:1px solid #222;
}
.card{
  flex:1;
  text-align:center;
  margin:0 5px;
  background:#1a1f29;
  border-radius:12px;
  padding:8px 6px;
  font-size:18px;
}
.label{
  font-size:12px;
  color:#aaa;
  margin-bottom:4px;
}
.value{
  font-weight:bold;
  font-size:22px;
  transition:color .3s;
}
.up{color:#18c964;}
.down{color:#ff4d4f;}
</style>
<!-- favicon kaldırıldı -->
</head>
<body>
<header> Canlı Kurlar</header>
<div id="time">Yükleniyor...</div>
<footer>
  <div class="card"><div class="label">USD / TRY</div><div id="usd" class="value">--</div></div>
  <div class="card"><div class="label">EUR / TRY</div><div id="eur" class="value">--</div></div>
  <div class="card"><div class="label">GBP / TRY</div><div id="gbp" class="value">--</div></div>
  <div class="card"><div class="label">GRAM ALTIN</div><div id="gold" class="value">--</div></div>
</footer>

<script>
const el = id => document.getElementById(id);
const last = {};

function update(id,val){
  const e = el(id);
  const v = parseFloat(val);
  const prev = last[id];
  last[id] = v;
  e.textContent = isNaN(v) ? "--" : v.toFixed(2);
  if(prev){
    if(v>prev) e.className="value up";
    else if(v<prev) e.className="value down";
    else e.className="value";
  }
}

async function refresh(){
  try{
    // CORS uyumlu güvenilir kaynak
    const fxRes = await fetch("https://api.exchangerate.host/latest?base=TRY&symbols=USD,EUR,GBP,XAU");
    const fxData = await fxRes.json();

    if(!fxData || !fxData.rates) throw new Error("API response boş geldi");

    const usdtry = 1 / fxData.rates.USD;
    const eurtry = 1 / fxData.rates.EUR;
    const gbptry = 1 / fxData.rates.GBP;
    const usdToXau = 1 / fxData.rates.XAU;
    const gramAltin = (usdtry * usdToXau) / 31.1035;

    update("usd", usdtry);
    update("eur", eurtry);
    update("gbp", gbptry);
    update("gold", gramAltin);

    el("time").textContent = "Son güncelleme: " + new Date().toLocaleTimeString("tr-TR",{hour12:false});
  }catch(e){
    console.error("Hata:", e);
    el("time").textContent="Veri alınamadı";
  }
}

refresh();
setInterval(refresh, 10000);
</script>
</body>
</html>
