<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=640, initial-scale=1, user-scalable=no" />
<title>CanlÄ± Kurlar</title>

<style>
body{
  margin:0;background:#0f1115;color:#fff;font-family:Segoe UI,Roboto,Arial,sans-serif;
  width:640px;height:1152px;overflow:hidden;position:relative;
}
header{text-align:center;padding:25px 10px 5px;font-size:28px;font-weight:600;color:#3aa0ff;}
#time{text-align:center;font-size:13px;color:#999;margin-bottom:10px;}
footer{
  position:absolute;bottom:0;left:0;width:100%;
  display:flex;justify-content:space-between;align-items:center;
  padding:10px 15px;background:rgba(0,0,0,0.8);backdrop-filter:blur(8px);border-top:1px solid #222;
}
.card{
  flex:1;text-align:center;margin:0 5px;background:#1a1f29;
  border-radius:12px;padding:8px 5px;font-size:18px;
}
.value{font-size:24px;font-weight:600;margin-top:4px;color:#3aa0ff;}
</style>

</head>
<body>

<header>ðŸ’± CanlÄ± Kurlar</header>
<div id="time">Son gÃ¼ncelleme: --:--:--</div>

<footer>
  <div class="card"><div>USD / TRY</div><div id="usd" class="value">--</div></div>
  <div class="card"><div>EUR / TRY</div><div id="eur" class="value">--</div></div>
  <div class="card"><div>GBP / TRY</div><div id="gbp" class="value">--</div></div>
  <div class="card"><div>GRAM ALTIN</div><div id="gram" class="value">--</div></div>
</footer>

<script>
async function fetchData(){
  try {
    // TCMB DÃ¶viz XML verisi
    const tcmbRes = await fetch("https://www.tcmb.gov.tr/kurlar/today.xml");
    const tcmbText = await tcmbRes.text();
    const parser = new DOMParser();
    const xml = parser.parseFromString(tcmbText, "text/xml");

    function getRate(code){
      const entry = xml.querySelector(`Currency[Kod="${code}"]`);
      return parseFloat(entry.querySelector("ForexSelling").textContent.replace(",", "."));
    }

    const usd = getRate("USD");
    const eur = getRate("EUR");
    const gbp = getRate("GBP");

    // Ons AltÄ±n FiyatÄ± (CORS aÃ§Ä±k ve Ã¼cretsiz)
    const metalRes = await fetch("https://api.metals.live/v1/spot");
    const metalData = await metalRes.json();
    const ons = metalData[0].gold; // USD cinsinden ons altÄ±n

    const gram = (ons * usd) / 31.1035;

    document.getElementById("usd").textContent = usd.toFixed(2);
    document.getElementById("eur").textContent = eur.toFixed(2);
    document.getElementById("gbp").textContent = gbp.toFixed(2);
    document.getElementById("gram").textContent = gram.toFixed(2);

    // Saat
    const now = new Date();
    document.getElementById("time").textContent =
      "Son gÃ¼ncelleme: " + now.toLocaleTimeString("tr-TR");

  } catch(err){
    console.error("Hata:", err);
  }
}

// Ä°lk Ã§alÄ±ÅŸtÄ±rma
fetchData();
// Her 30 saniyede bir gÃ¼ncelle
setInterval(fetchData, 30000);
</script>

</body>
</html>
